{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\SHISHIWAKA\\\\projects\\\\AutoPlannerApp\\\\application\\\\src\\\\TravelPlanner.js\";\nimport React, { useState, useEffect } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Formik } from 'formik';\nexport default function TravelPlanner(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      destinations = _useState2[0],\n      setDestinations = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      departures = _useState4[0],\n      setDepartures = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      trip = _useState6[0],\n      setTrip = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      ready = _useState8[0],\n      setReady = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      token = _useState10[0],\n      setToken = _useState10[1];\n\n  useEffect(function () {\n    fetch('http://10.0.2.2:3000/vasttrafik/getToken', {\n      method: 'POST'\n    }).then(function (response) {\n      return response.text();\n    }).then(function (result) {\n      console.log(result);\n      setToken(result);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, []);\n\n  function Item(_ref) {\n    var item = _ref.item,\n        fieldSetter = _ref.fieldSetter;\n    return React.createElement(Text, {\n      onPress: function onPress() {\n        console.log(item);\n        fieldSetter();\n        setDepartures([]);\n        setDestinations([]);\n      },\n      style: {\n        backgroundColor: '#eee',\n        marginVertical: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 7\n      }\n    }, item.name);\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, React.createElement(Formik, {\n    initialValues: {\n      departure: '',\n      destination: ''\n    },\n    onSubmit: function onSubmit(values) {\n      console.log(values);\n      var trip = {\n        departure: encodeURIComponent(values.departure).replace('%20', '+'),\n        destination: encodeURIComponent(values.destination).replace('%20', '+')\n      };\n      var s = 'kungsbacka station';\n      console.log(encodeURIComponent(s).replace('%20', '+'));\n\n      if (values.departure != '' && values.destination != '') {\n        fetch('https://api.vasttrafik.se/bin/rest.exe/v2/trip?originId=' + trip.departure + '&destId=' + trip.destination + '&numTrips=10&format=json', {\n          method: 'GET',\n          headers: {\n            Authorization: 'Bearer ' + token\n          }\n        }).then(function (response) {\n          return response.text();\n        }).then(function (res) {\n          return console.log(res);\n        });\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, function (_ref2) {\n    var handleChange = _ref2.handleChange,\n        handleSubmit = _ref2.handleSubmit,\n        setFieldValue = _ref2.setFieldValue,\n        values = _ref2.values;\n    return React.createElement(View, {\n      style: styles.border,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, React.createElement(TextInput, {\n      style: styles.inputField,\n      onChangeText: function onChangeText(e) {\n        setDepartures([]);\n        fetch('https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=' + values.departure + '&format=json', {\n          method: 'GET',\n          headers: {\n            Authorization: 'Bearer ' + token\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (res) {\n          setDepartures(res.LocationList.StopLocation);\n\n          for (var i = 0; i < res.length; i++) {\n            console.log(res[i]);\n          }\n        }).catch(function (err) {\n          return console.error('error:', err);\n        });\n        handleChange('departure')(e);\n      },\n      value: values.departure,\n      placeholder: \"Fr\\xE5n:\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }))), React.createElement(FlatList, {\n      style: {\n        maxHeight: '30%'\n      },\n      data: departures,\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n        return React.createElement(Item, {\n          fieldSetter: function fieldSetter() {\n            setFieldValue('departure', item.name);\n          },\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.border,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, React.createElement(TextInput, {\n      style: styles.inputField,\n      onChangeText: function onChangeText(e) {\n        setDestinations([]);\n        fetch('https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=' + values.destination + '&format=json', {\n          method: 'GET',\n          headers: {\n            Authorization: 'Bearer ' + token\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (res) {\n          setDestinations(res.LocationList.StopLocation);\n\n          for (var i = 0; i < res.length; i++) {\n            console.log(res[i]);\n          }\n        }).catch(function (err) {\n          return console.error('error:', err);\n        });\n        handleChange('destination')(e);\n      },\n      value: values.destination,\n      placeholder: \"Till:\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    })), React.createElement(FlatList, {\n      style: {\n        maxHeight: '30%'\n      },\n      data: destinations,\n      renderItem: function renderItem(_ref4) {\n        var item = _ref4.item;\n        return React.createElement(Item, {\n          fieldSetter: function fieldSetter() {\n            setFieldValue('destination', item.name);\n          },\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.submitButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: '#FFF',\n        fontSize: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, \"S\\xF6k resa\"))));\n  }));\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'white',\n    paddingVertical: 50,\n    paddingHorizontal: 30,\n    borderRadius: 20,\n    width: '65%'\n  },\n  inputField: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginVertical: 15\n  },\n  submitButton: {\n    backgroundColor: '#2991bb',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    alignItems: 'center'\n  },\n  item: {\n    backgroundColor: '#f9c2ff'\n  },\n  title: {\n    fontSize: 16\n  }\n});","map":{"version":3,"sources":["C:/Users/SHISHIWAKA/projects/AutoPlannerApp/application/src/TravelPlanner.js"],"names":["React","useState","useEffect","Formik","TravelPlanner","props","destinations","setDestinations","departures","setDepartures","trip","setTrip","ready","setReady","token","setToken","fetch","method","then","response","text","result","console","log","catch","err","Item","item","fieldSetter","backgroundColor","marginVertical","name","styles","container","departure","destination","values","encodeURIComponent","replace","s","headers","Authorization","res","handleChange","handleSubmit","setFieldValue","border","inputField","e","json","LocationList","StopLocation","i","length","error","maxHeight","id","submitButton","color","fontSize","StyleSheet","create","paddingVertical","paddingHorizontal","borderRadius","width","alignItems","justifyContent","title"],"mappings":"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","sourcesContent":["/* global fetch */\r\nimport React, { useState, useEffect } from 'react'\r\nimport {\r\n  Button,\r\n  FlatList,\r\n  StyleSheet,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View\r\n} from 'react-native'\r\nimport { Formik } from 'formik'\r\n\r\nexport default function TravelPlanner(props) {\r\n  const [destinations, setDestinations] = useState([])\r\n  const [departures, setDepartures] = useState([])\r\n  const [trip, setTrip] = useState([])\r\n  const [ready, setReady] = useState(false)\r\n\r\n  const [token, setToken] = useState('')\r\n  useEffect(() => {\r\n    fetch('http://10.0.2.2:3000/vasttrafik/getToken', {\r\n      method: 'POST'\r\n    })\r\n      .then((response) => response.text())\r\n      .then((result) => {\r\n        console.log(result)\r\n        setToken(result)\r\n      })\r\n\r\n      .catch(function (err) {\r\n        console.log(err)\r\n      })\r\n  }, [])\r\n\r\n  //{item, fieldSetter}\r\n  // props : props.item, props.fieldsetter\r\n  function Item({ item, fieldSetter }) {\r\n    return (\r\n      <Text\r\n        onPress={() => {\r\n          console.log(item)\r\n          fieldSetter()\r\n          setDepartures([])\r\n          setDestinations([])\r\n        }}\r\n        style={{ backgroundColor: '#eee', marginVertical: 1 }}\r\n      >\r\n        {item.name}\r\n      </Text>\r\n    )\r\n  }\r\n\r\n  //api.vasttrafik.se/bin/rest.exe/v2/trip?originId=Kungsbacka+station%2C+Kungsbacka&destId=Swedenborgsplatsen%2C+G%C3%B6teborg&numTrips=10&format=json\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Formik\r\n        initialValues={{ departure: '', destination: '' }}\r\n        onSubmit={(values) => {\r\n          console.log(values)\r\n\r\n          let trip = {\r\n            departure: encodeURIComponent(values.departure).replace('%20', '+'),\r\n            destination: encodeURIComponent(values.destination).replace(\r\n              '%20',\r\n              '+'\r\n            )\r\n          }\r\n\r\n          let s = 'kungsbacka station'\r\n          console.log(encodeURIComponent(s).replace('%20', '+'))\r\n\r\n          if (values.departure != '' && values.destination != '') {\r\n            fetch(\r\n              'https://api.vasttrafik.se/bin/rest.exe/v2/trip?originId=' +\r\n                trip.departure +\r\n                '&destId=' +\r\n                trip.destination +\r\n                '&numTrips=10&format=json',\r\n              {\r\n                method: 'GET',\r\n                headers: {\r\n                  Authorization: 'Bearer ' + token\r\n                }\r\n              }\r\n            )\r\n              .then((response) => response.text())\r\n              .then((res) => console.log(res))\r\n          }\r\n        }}\r\n      >\r\n        {({ handleChange, handleSubmit, setFieldValue, values }) => (\r\n          <View style={styles.border}>\r\n            <View>\r\n              <View>\r\n                <TextInput\r\n                  style={styles.inputField}\r\n                  onChangeText={(e) => {\r\n                    setDepartures([])\r\n\r\n                    fetch(\r\n                      'https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=' +\r\n                        values.departure +\r\n                        '&format=json',\r\n                      {\r\n                        method: 'GET',\r\n                        headers: {\r\n                          Authorization: 'Bearer ' + token\r\n                        }\r\n                      }\r\n                    )\r\n                      .then((response) => response.json())\r\n                      .then((res) => {\r\n                        setDepartures(res.LocationList.StopLocation)\r\n                        for (let i = 0; i < res.length; i++) {\r\n                          console.log(res[i])\r\n                        }\r\n                      })\r\n                      .catch((err) => console.error('error:', err))\r\n\r\n                    handleChange('departure')(e)\r\n                  }}\r\n                  value={values.departure}\r\n                  placeholder=\"Från:\"\r\n                />\r\n              </View>\r\n            </View>\r\n\r\n            <FlatList\r\n              style={{ maxHeight: '30%' }}\r\n              data={departures}\r\n              renderItem={({ item }) => (\r\n                <Item\r\n                  fieldSetter={() => {\r\n                    setFieldValue('departure', item.name)\r\n                  }}\r\n                  item={item}\r\n                />\r\n              )}\r\n              keyExtractor={(item) => item.id}\r\n            />\r\n\r\n            <View style={styles.border}>\r\n              <TextInput\r\n                style={styles.inputField}\r\n                onChangeText={(e) => {\r\n                  setDestinations([])\r\n\r\n                  fetch(\r\n                    'https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=' +\r\n                      values.destination +\r\n                      '&format=json',\r\n                    {\r\n                      method: 'GET',\r\n                      headers: {\r\n                        Authorization: 'Bearer ' + token\r\n                      }\r\n                    }\r\n                  )\r\n                    .then((response) => response.json())\r\n                    .then((res) => {\r\n                      setDestinations(res.LocationList.StopLocation)\r\n                      for (let i = 0; i < res.length; i++) {\r\n                        console.log(res[i])\r\n                      }\r\n                    })\r\n                    .catch((err) => console.error('error:', err))\r\n\r\n                  handleChange('destination')(e)\r\n                }}\r\n                value={values.destination}\r\n                placeholder=\"Till:\"\r\n              />\r\n            </View>\r\n\r\n            <FlatList\r\n              style={{ maxHeight: '30%' }}\r\n              data={destinations}\r\n              renderItem={({ item }) => (\r\n                <Item\r\n                  fieldSetter={() => {\r\n                    setFieldValue('destination', item.name)\r\n                  }}\r\n                  item={item}\r\n                />\r\n              )}\r\n              keyExtractor={(item) => item.id}\r\n            />\r\n\r\n            <View style={styles.submitButton}>\r\n              <TouchableOpacity onPress={handleSubmit}>\r\n                <Text style={{ color: '#FFF', fontSize: 15 }}>Sök resa</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        )}\r\n      </Formik>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: 'white',\r\n    paddingVertical: 50,\r\n    paddingHorizontal: 30,\r\n    borderRadius: 20,\r\n    width: '65%'\r\n  },\r\n  inputField: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginVertical: 15\r\n  },\r\n\r\n  submitButton: {\r\n    backgroundColor: '#2991bb',\r\n    paddingHorizontal: 15,\r\n    paddingVertical: 10,\r\n    alignItems: 'center'\r\n  },\r\n  item: {\r\n    backgroundColor: '#f9c2ff'\r\n  },\r\n  title: {\r\n    fontSize: 16\r\n  }\r\n})\r\n"]},"metadata":{},"sourceType":"module"}