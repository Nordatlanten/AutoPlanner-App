{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\geval\\\\Projects\\\\AutoPlanner-App\\\\application\\\\src\\\\TravelPlanner.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component, useState, useEffect } from \"react\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Formik } from \"formik\";\nimport { Col, Row, Grid } from \"react-native-easy-grid\";\nexport default function TravelPlanner(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalVisible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      destinations = _useState4[0],\n      setDestinations = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      departures = _useState6[0],\n      setDepartures = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tripResult = _useState8[0],\n      setTripResult = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      resultsReady = _useState10[0],\n      setResultsReady = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      showTripDetails = _useState12[0],\n      setShowTripDetails = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      clickedTrip = _useState14[0],\n      setClickedTrip = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      token = _useState16[0],\n      setToken = _useState16[1];\n\n  useEffect(function () {\n    fetch(\"http://10.0.2.2:3000/vasttrafik/getToken\", {\n      method: \"POST\"\n    }).then(function (response) {\n      return response.text();\n    }).then(function (result) {\n      console.log(result);\n      setToken(result);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, []);\n\n  function getTravelTime(origin, dest) {\n    var originTime = new Date(origin.date + \"T\" + origin.time + \":00\");\n    var destTime = new Date(dest.date + \"T\" + dest.time + \":00\");\n    var travelTime = (destTime.getTime() - originTime.getTime()) / 1000;\n    travelTime /= 60;\n    return Math.abs(Math.round(travelTime));\n  }\n\n  function Item(_ref) {\n    var item = _ref.item,\n        fieldSetter = _ref.fieldSetter;\n    return React.createElement(Text, {\n      onPress: function onPress() {\n        console.log(item);\n        fieldSetter();\n        setDepartures([]);\n        setDestinations([]);\n      },\n      style: {\n        backgroundColor: \"#eee\",\n        marginVertical: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, item.name);\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: (modalVisible, resultsReady),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 24,\n      fontWeight: \"bold\",\n      marginBottom: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"M\\xF6jliga resalternativ\"), React.createElement(Grid, {\n    style: styles.tableBorder,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, React.createElement(Row, {\n    style: {\n      backgroundColor: \"#4c86aa\",\n      padding: 10,\n      maxHeight: \"20%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, \"Antal byten:\")), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }\n  }, \"Restid:\")), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"Avg\\xE5ng:\")), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, \"Ankomst:\"))), tripResult.map(function (trip, i) {\n    return React.createElement(Col, {\n      key: i,\n      style: styles.tableContainer,\n      onPress: function onPress() {\n        setClickedTrip(trip.Leg);\n\n        if (showTripDetails === false) {\n          setShowTripDetails(true);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 19\n      }\n    }, React.createElement(Row, {\n      style: styles.tableItems,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 23\n      }\n    }, trip.Leg.length, \" \"), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 23\n      }\n    }, getTravelTime(trip.Leg[0].Origin, trip.Leg[trip.Leg.length - 1].Destination) + \"min\"), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 23\n      }\n    }, trip.Leg[0].Origin.time), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 23\n      }\n    }, trip.Leg[trip.Leg.length - 1].Destination.time)));\n  })), showTripDetails && React.createElement(Grid, {\n    style: styles.tableBorder,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, React.createElement(Row, {\n    style: {\n      backgroundColor: \"#4c86aa\",\n      padding: 10,\n      maxHeight: \"18%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, \"Resdel: \")), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, \"F\\xE4rds\\xE4tt: \")), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, \"Avg\\xE5ng:\")), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, \"Ankomst:\"))), clickedTrip && clickedTrip.map(function (trip, i) {\n    return React.createElement(Col, {\n      key: i,\n      style: styles.tableContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 23\n      }\n    }, React.createElement(Row, {\n      style: styles.tableItems,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }, React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 27\n      }\n    }, i + 1, \" \"), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 27\n      }\n    }, trip.name), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 27\n      }\n    }, trip.Origin.time), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 27\n      }\n    }, trip.Destination.time)));\n  })), React.createElement(TouchableHighlight, {\n    style: _objectSpread(_objectSpread({}, styles.openButton), {}, {\n      backgroundColor: \"#2196F3\"\n    }),\n    onPress: function onPress() {\n      setModalVisible(!modalVisible);\n      setResultsReady(!resultsReady);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.textStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, \"St\\xE4ng\"))))), React.createElement(Formik, {\n    initialValues: {\n      departure: \"\",\n      destination: \"\"\n    },\n    onSubmit: function onSubmit(values) {\n      console.log(values);\n      setClickedTrip([]);\n      setShowTripDetails(false);\n      var trip = {\n        departure: encodeURIComponent(encodeURIComponent(values.departure).replace(\"(\", \"%28\").replace(\")\", \"%29\")),\n        destination: encodeURIComponent(encodeURIComponent(values.destination).replace(\"(\", \"%28\").replace(\")\", \"%29\"))\n      };\n      console.log(\"https://api.vasttrafik.se/bin/rest.exe/v2/trip?originId=\" + trip.departure + \"&destId=\" + trip.destination + \"&numTrips=10&format=json\");\n\n      if (values.departure != \"\" && values.destination != \"\") {\n        fetch(\"https://api.vasttrafik.se/bin/rest.exe/v2/trip?originId=\" + trip.departure + \"&destId=\" + trip.destination + \"&numTrips=10&format=json\", {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (res) {\n          var tripList = res.TripList.Trip.map(function (trip) {\n            var fixedTrip = trip;\n\n            if (!Array.isArray(trip.Leg)) {\n              fixedTrip.Leg = [trip.Leg];\n              return fixedTrip;\n            } else {\n              return fixedTrip;\n            }\n          });\n          console.log(tripList.length);\n          setTripResult(tripList);\n          console.log(tripResult);\n          setResultsReady(true);\n          setModalVisible(true);\n        });\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }, function (_ref2) {\n    var handleChange = _ref2.handleChange,\n        handleSubmit = _ref2.handleSubmit,\n        setFieldValue = _ref2.setFieldValue,\n        values = _ref2.values;\n    return React.createElement(View, {\n      style: styles.border,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 15\n      }\n    }, React.createElement(TextInput, {\n      style: styles.inputField,\n      onChangeText: function onChangeText(e) {\n        setDepartures([]);\n        fetch(\"https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=\" + values.departure + \"&format=json\", {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (res) {\n          setDepartures(res.LocationList.StopLocation);\n\n          for (var i = 0; i < res.length; i++) {\n            console.log(res[i]);\n          }\n        }).catch(function (err) {\n          return console.error(\"error:\", err);\n        });\n        handleChange(\"departure\")(e);\n      },\n      value: values.departure,\n      placeholder: \"Fr\\xE5n:\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }\n    }))), React.createElement(FlatList, {\n      style: {\n        maxHeight: \"30%\"\n      },\n      data: departures,\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n        return React.createElement(Item, {\n          fieldSetter: function fieldSetter() {\n            setFieldValue(\"departure\", item.name);\n          },\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.border,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 13\n      }\n    }, React.createElement(TextInput, {\n      style: styles.inputField,\n      onChangeText: function onChangeText(e) {\n        setDestinations([]);\n        fetch(\"https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=\" + values.destination + \"&format=json\", {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (res) {\n          setDestinations(res.LocationList.StopLocation);\n\n          for (var i = 0; i < res.length; i++) {\n            console.log(res[i]);\n          }\n        }).catch(function (err) {\n          return console.error(\"error:\", err);\n        });\n        handleChange(\"destination\")(e);\n      },\n      value: values.destination,\n      placeholder: \"Till:\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 15\n      }\n    })), React.createElement(FlatList, {\n      style: {\n        maxHeight: \"30%\"\n      },\n      data: destinations,\n      renderItem: function renderItem(_ref4) {\n        var item = _ref4.item;\n        return React.createElement(Item, {\n          fieldSetter: function fieldSetter() {\n            setFieldValue(\"destination\", item.name);\n          },\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 17\n          }\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.submitButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#FFF\",\n        fontSize: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 17\n      }\n    }, \"S\\xF6k resa\"))));\n  }));\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    paddingVertical: 50,\n    paddingHorizontal: 30,\n    borderRadius: 20,\n    width: \"65%\"\n  },\n  inputField: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginVertical: 15\n  },\n  submitButton: {\n    backgroundColor: \"#2991bb\",\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    alignItems: \"center\"\n  },\n  item: {\n    backgroundColor: \"#f9c2ff\"\n  },\n  title: {\n    fontSize: 16\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: \"#71c7ec\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  openButton: {\n    backgroundColor: \"#F194FF\",\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    textAlign: \"center\"\n  },\n  tableContainer: {\n    display: \"flex\",\n    backgroundColor: \"#f0f0f0\"\n  },\n  tableItems: {\n    justifyContent: \"space-around\",\n    alignItems: \"center\"\n  },\n  tableBorder: {\n    borderRadius: 20,\n    width: 275,\n    marginBottom: 20\n  }\n});","map":{"version":3,"sources":["C:/Users/geval/Projects/AutoPlanner-App/application/src/TravelPlanner.js"],"names":["React","Component","useState","useEffect","Formik","Col","Row","Grid","TravelPlanner","props","modalVisible","setModalVisible","destinations","setDestinations","departures","setDepartures","tripResult","setTripResult","resultsReady","setResultsReady","showTripDetails","setShowTripDetails","clickedTrip","setClickedTrip","token","setToken","fetch","method","then","response","text","result","console","log","catch","err","getTravelTime","origin","dest","originTime","Date","date","time","destTime","travelTime","getTime","Math","abs","round","Item","item","fieldSetter","backgroundColor","marginVertical","name","styles","container","centeredView","modalView","fontSize","fontWeight","marginBottom","tableBorder","padding","maxHeight","color","map","trip","i","tableContainer","Leg","tableItems","length","Origin","Destination","openButton","textStyle","departure","destination","values","encodeURIComponent","replace","headers","Authorization","json","res","tripList","TripList","Trip","fixedTrip","Array","isArray","handleChange","handleSubmit","setFieldValue","border","inputField","e","LocationList","StopLocation","error","id","submitButton","StyleSheet","create","paddingVertical","paddingHorizontal","borderRadius","width","alignItems","justifyContent","title","flex","marginTop","margin","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","textAlign","modalText","display"],"mappings":"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","sourcesContent":["/* global fetch */\r\n\r\nimport React, { Component, useState, useEffect } from \"react\"\r\nimport {\r\n  FlatList,\r\n  Modal,\r\n  StyleSheet,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  TouchableHighlight,\r\n  View,\r\n} from \"react-native\"\r\nimport { Formik } from \"formik\"\r\nimport { Col, Row, Grid } from \"react-native-easy-grid\"\r\n\r\nexport default function TravelPlanner(props) {\r\n  const [modalVisible, setModalVisible] = useState(false)\r\n  const [destinations, setDestinations] = useState([])\r\n  const [departures, setDepartures] = useState([])\r\n  const [tripResult, setTripResult] = useState([])\r\n  const [resultsReady, setResultsReady] = useState(false)\r\n  const [showTripDetails, setShowTripDetails] = useState(false)\r\n  const [clickedTrip, setClickedTrip] = useState([])\r\n\r\n  const [token, setToken] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://10.0.2.2:3000/vasttrafik/getToken\", {\r\n      method: \"POST\",\r\n    })\r\n      .then((response) => response.text())\r\n      .then((result) => {\r\n        console.log(result)\r\n        setToken(result)\r\n      })\r\n\r\n      .catch(function (err) {\r\n        console.log(err)\r\n      })\r\n  }, [])\r\n\r\n  function getTravelTime(origin, dest) {\r\n    let originTime = new Date(origin.date + \"T\" + origin.time + \":00\")\r\n    let destTime = new Date(dest.date + \"T\" + dest.time + \":00\")\r\n    var travelTime = (destTime.getTime() - originTime.getTime()) / 1000\r\n    travelTime /= 60\r\n    return Math.abs(Math.round(travelTime))\r\n  }\r\n\r\n  //{item, fieldSetter}\r\n  // props : props.item, props.fieldsetter\r\n  function Item({ item, fieldSetter }) {\r\n    return (\r\n      <Text\r\n        onPress={() => {\r\n          console.log(item)\r\n          fieldSetter()\r\n          setDepartures([])\r\n          setDestinations([])\r\n        }}\r\n        style={{ backgroundColor: \"#eee\", marginVertical: 1 }}\r\n      >\r\n        {item.name}\r\n      </Text>\r\n    )\r\n  }\r\n\r\n  //api.vasttrafik.se/bin/rest.exe/v2/trip?originId=Kungsbacka+station%2C+Kungsbacka&destId=Swedenborgsplatsen%2C+G%C3%B6teborg&numTrips=10&format=json\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={(modalVisible, resultsReady)}\r\n      >\r\n        <View style={styles.centeredView}>\r\n          <View style={styles.modalView}>\r\n            <Text\r\n              style={{ fontSize: 24, fontWeight: \"bold\", marginBottom: 20 }}\r\n            >\r\n              Möjliga resalternativ\r\n            </Text>\r\n\r\n            <Grid style={styles.tableBorder}>\r\n              <Row\r\n                style={{\r\n                  backgroundColor: \"#4c86aa\",\r\n                  padding: 10,\r\n                  maxHeight: \"20%\",\r\n                }}\r\n              >\r\n                <Col>\r\n                  <Text style={{ color: \"#fff\" }}>Antal byten:</Text>\r\n                </Col>\r\n\r\n                <Col>\r\n                  <Text style={{ color: \"#fff\" }}>Restid:</Text>\r\n                </Col>\r\n                <Col>\r\n                  <Text style={{ color: \"#fff\" }}>Avgång:</Text>\r\n                </Col>\r\n                <Col>\r\n                  <Text style={{ color: \"#fff\" }}>Ankomst:</Text>\r\n                </Col>\r\n              </Row>\r\n\r\n              {tripResult.map((trip, i) => {\r\n                return (\r\n                  <Col\r\n                    key={i}\r\n                    style={styles.tableContainer}\r\n                    onPress={() => {\r\n                      setClickedTrip(trip.Leg)\r\n                      if (showTripDetails === false) {\r\n                        setShowTripDetails(true)\r\n                      }\r\n                    }}\r\n                  >\r\n                    <Row style={styles.tableItems}>\r\n                      <Text>{trip.Leg.length} </Text>\r\n                      <Text>\r\n                        {getTravelTime(\r\n                          trip.Leg[0].Origin,\r\n                          trip.Leg[trip.Leg.length - 1].Destination\r\n                        ) + \"min\"}\r\n                      </Text>\r\n                      <Text>{trip.Leg[0].Origin.time}</Text>\r\n                      <Text>\r\n                        {trip.Leg[trip.Leg.length - 1].Destination.time}\r\n                      </Text>\r\n                    </Row>\r\n                  </Col>\r\n                )\r\n              })}\r\n            </Grid>\r\n\r\n            {showTripDetails && (\r\n              <Grid style={styles.tableBorder}>\r\n                <Row\r\n                  style={{\r\n                    backgroundColor: \"#4c86aa\",\r\n                    padding: 10,\r\n                    maxHeight: \"18%\",\r\n                  }}\r\n                >\r\n                  <Col>\r\n                    <Text style={{ color: \"#fff\" }}>Resdel: </Text>\r\n                  </Col>\r\n\r\n                  <Col>\r\n                    <Text style={{ color: \"#fff\" }}>Färdsätt: </Text>\r\n                  </Col>\r\n                  <Col>\r\n                    <Text style={{ color: \"#fff\" }}>Avgång:</Text>\r\n                  </Col>\r\n                  <Col>\r\n                    <Text style={{ color: \"#fff\" }}>Ankomst:</Text>\r\n                  </Col>\r\n                </Row>\r\n\r\n                {clickedTrip &&\r\n                  clickedTrip.map((trip, i) => {\r\n                    return (\r\n                      <Col key={i} style={styles.tableContainer}>\r\n                        <Row style={styles.tableItems}>\r\n                          <Text>{i + 1} </Text>\r\n                          <Text>{trip.name}</Text>\r\n                          <Text>{trip.Origin.time}</Text>\r\n                          <Text>{trip.Destination.time}</Text>\r\n                        </Row>\r\n                      </Col>\r\n                    )\r\n                  })}\r\n              </Grid>\r\n            )}\r\n\r\n            <TouchableHighlight\r\n              style={{ ...styles.openButton, backgroundColor: \"#2196F3\" }}\r\n              onPress={() => {\r\n                setModalVisible(!modalVisible)\r\n                setResultsReady(!resultsReady)\r\n              }}\r\n            >\r\n              <Text style={styles.textStyle}>Stäng</Text>\r\n            </TouchableHighlight>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n\r\n      <Formik\r\n        initialValues={{ departure: \"\", destination: \"\" }}\r\n        onSubmit={(values) => {\r\n          console.log(values)\r\n          setClickedTrip([])\r\n          setShowTripDetails(false)\r\n\r\n          let trip = {\r\n            departure: encodeURIComponent(\r\n              encodeURIComponent(values.departure)\r\n                .replace(\"(\", \"%28\")\r\n                .replace(\")\", \"%29\")\r\n            ),\r\n            destination: encodeURIComponent(\r\n              encodeURIComponent(values.destination)\r\n                .replace(\"(\", \"%28\")\r\n                .replace(\")\", \"%29\")\r\n            ),\r\n          }\r\n\r\n          console.log(\r\n            \"https://api.vasttrafik.se/bin/rest.exe/v2/trip?originId=\" +\r\n              trip.departure +\r\n              \"&destId=\" +\r\n              trip.destination +\r\n              \"&numTrips=10&format=json\"\r\n          )\r\n\r\n          if (values.departure != \"\" && values.destination != \"\") {\r\n            fetch(\r\n              \"https://api.vasttrafik.se/bin/rest.exe/v2/trip?originId=\" +\r\n                trip.departure +\r\n                \"&destId=\" +\r\n                trip.destination +\r\n                \"&numTrips=10&format=json\",\r\n\r\n              {\r\n                method: \"GET\",\r\n\r\n                headers: {\r\n                  Authorization: \"Bearer \" + token,\r\n                },\r\n              }\r\n            )\r\n              .then((response) => response.json())\r\n              .then((res) => {\r\n                let tripList = res.TripList.Trip.map((trip) => {\r\n                  // console.log(trip)\r\n                  let fixedTrip = trip\r\n                  if (!Array.isArray(trip.Leg)) {\r\n                    fixedTrip.Leg = [trip.Leg]\r\n                    return fixedTrip\r\n                  } else {\r\n                    return fixedTrip\r\n                  }\r\n                })\r\n                console.log(tripList.length)\r\n                setTripResult(tripList)\r\n                console.log(tripResult)\r\n\r\n                setResultsReady(true)\r\n                setModalVisible(true)\r\n              })\r\n          }\r\n        }}\r\n      >\r\n        {({ handleChange, handleSubmit, setFieldValue, values }) => (\r\n          <View style={styles.border}>\r\n            <View>\r\n              <View>\r\n                <TextInput\r\n                  style={styles.inputField}\r\n                  onChangeText={(e) => {\r\n                    setDepartures([])\r\n                    fetch(\r\n                      \"https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=\" +\r\n                        values.departure +\r\n                        \"&format=json\",\r\n                      {\r\n                        method: \"GET\",\r\n                        headers: {\r\n                          Authorization: \"Bearer \" + token,\r\n                        },\r\n                      }\r\n                    )\r\n                      .then((response) => response.json())\r\n                      .then((res) => {\r\n                        setDepartures(res.LocationList.StopLocation)\r\n                        for (let i = 0; i < res.length; i++) {\r\n                          console.log(res[i])\r\n                        }\r\n                      })\r\n                      .catch((err) => console.error(\"error:\", err))\r\n\r\n                    handleChange(\"departure\")(e)\r\n                  }}\r\n                  value={values.departure}\r\n                  placeholder=\"Från:\"\r\n                />\r\n              </View>\r\n            </View>\r\n\r\n            <FlatList\r\n              style={{ maxHeight: \"30%\" }}\r\n              data={departures}\r\n              renderItem={({ item }) => (\r\n                <Item\r\n                  fieldSetter={() => {\r\n                    setFieldValue(\"departure\", item.name)\r\n                  }}\r\n                  item={item}\r\n                />\r\n              )}\r\n              keyExtractor={(item) => item.id}\r\n            />\r\n\r\n            <View style={styles.border}>\r\n              <TextInput\r\n                style={styles.inputField}\r\n                onChangeText={(e) => {\r\n                  setDestinations([])\r\n\r\n                  fetch(\r\n                    \"https://api.vasttrafik.se/bin/rest.exe/v2/location.name?input=\" +\r\n                      values.destination +\r\n                      \"&format=json\",\r\n                    {\r\n                      method: \"GET\",\r\n                      headers: {\r\n                        Authorization: \"Bearer \" + token,\r\n                      },\r\n                    }\r\n                  )\r\n                    .then((response) => response.json())\r\n                    .then((res) => {\r\n                      setDestinations(res.LocationList.StopLocation)\r\n                      for (let i = 0; i < res.length; i++) {\r\n                        console.log(res[i])\r\n                      }\r\n                    })\r\n                    .catch((err) => console.error(\"error:\", err))\r\n\r\n                  handleChange(\"destination\")(e)\r\n                }}\r\n                value={values.destination}\r\n                placeholder=\"Till:\"\r\n              />\r\n            </View>\r\n\r\n            <FlatList\r\n              style={{ maxHeight: \"30%\" }}\r\n              data={destinations}\r\n              renderItem={({ item }) => (\r\n                <Item\r\n                  fieldSetter={() => {\r\n                    setFieldValue(\"destination\", item.name)\r\n                  }}\r\n                  item={item}\r\n                />\r\n              )}\r\n              keyExtractor={(item) => item.id}\r\n            />\r\n\r\n            <View style={styles.submitButton}>\r\n              <TouchableOpacity onPress={handleSubmit}>\r\n                <Text style={{ color: \"#FFF\", fontSize: 15 }}>Sök resa</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        )}\r\n      </Formik>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"white\",\r\n    paddingVertical: 50,\r\n    paddingHorizontal: 30,\r\n    borderRadius: 20,\r\n    width: \"65%\",\r\n  },\r\n  inputField: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginVertical: 15,\r\n  },\r\n\r\n  submitButton: {\r\n    backgroundColor: \"#2991bb\",\r\n    paddingHorizontal: 15,\r\n    paddingVertical: 10,\r\n    alignItems: \"center\",\r\n  },\r\n  item: {\r\n    backgroundColor: \"#f9c2ff\",\r\n  },\r\n  title: {\r\n    fontSize: 16,\r\n  },\r\n  centeredView: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginTop: 22,\r\n  },\r\n  modalView: {\r\n    margin: 20,\r\n    backgroundColor: \"#71c7ec\",\r\n    borderRadius: 20,\r\n    padding: 35,\r\n    alignItems: \"center\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n    elevation: 5,\r\n  },\r\n  openButton: {\r\n    backgroundColor: \"#F194FF\",\r\n    borderRadius: 20,\r\n    padding: 10,\r\n    elevation: 2,\r\n  },\r\n  textStyle: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    textAlign: \"center\",\r\n  },\r\n  modalText: {\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  tableContainer: {\r\n    display: \"flex\",\r\n    backgroundColor: \"#f0f0f0\",\r\n  },\r\n  tableItems: {\r\n    justifyContent: \"space-around\",\r\n    alignItems: \"center\",\r\n  },\r\n  tableBorder: {\r\n    borderRadius: 20,\r\n    width: 275,\r\n    marginBottom: 20,\r\n  },\r\n})\r\n"]},"metadata":{},"sourceType":"module"}