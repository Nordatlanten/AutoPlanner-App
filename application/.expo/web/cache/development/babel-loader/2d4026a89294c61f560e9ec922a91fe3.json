{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\geval\\\\Projects\\\\AutoPlanner-App\\\\application\\\\src\\\\DepartureBoard.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport * as Permissions from \"expo-permissions\";\nimport * as Location from \"expo-location\";\nexport default function CalendarScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      stops = _useState6[0],\n      setStops = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedStop = _useState8[0],\n      setSelectedStop = _useState8[1];\n\n  var _useState9 = useState(undefined),\n      _useState10 = _slicedToArray(_useState9, 2),\n      currentStopLines = _useState10[0],\n      setCurrentStopLines = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedValue = _useState12[0],\n      setSelectedValue = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      listReady = _useState14[0],\n      setListReady = _useState14[1];\n\n  useEffect(function () {\n    ;\n\n    (function _callee() {\n      var _await$Location$reque, status, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n\n              if (status !== \"granted\") {\n                setErrorMsg(\"Permission to access location was denied\");\n              }\n\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 7:\n              location = _context.sent;\n              setLocation(location);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  });\n  useEffect(function () {\n    fetch(\"http://10.0.2.2:3000/vasttrafik/getNearbyStops\", {\n      body: JSON.stringify({\n        lat: \"57.7066\",\n        lng: \"11.9672\"\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      method: \"POST\"\n    }).then(function (result) {\n      return result.json();\n    }).then(function (data) {\n      console.log(data);\n      setStops(data);\n      setSelectedStop(data[0]);\n      setListReady(true);\n      console.log(selectedStop.name);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, []);\n  var text = \"Waiting..\";\n\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n  }\n\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Avg\\xE5ngstavla\"), listReady && React.createElement(Picker, {\n    selectedValue: selectedStop.id,\n    style: {\n      height: 50,\n      width: 150\n    },\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      setSelectedValue(itemValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, stops.map(function (stop, i) {\n    React.createElement(Picker.Item, {\n      key: i,\n      label: stop.name,\n      value: stop.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }\n    });\n  }))), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, text));\n}","map":{"version":3,"sources":["C:/Users/geval/Projects/AutoPlanner-App/application/src/DepartureBoard.js"],"names":["React","useEffect","useState","Permissions","Location","CalendarScreen","navigation","location","setLocation","errorMsg","setErrorMsg","stops","setStops","selectedStop","setSelectedStop","undefined","currentStopLines","setCurrentStopLines","selectedValue","setSelectedValue","listReady","setListReady","requestPermissionsAsync","status","getCurrentPositionAsync","fetch","body","JSON","stringify","lat","lng","headers","method","then","result","json","data","console","log","name","catch","err","text","flex","alignItems","justifyContent","id","height","width","itemValue","itemIndex","map","stop","i"],"mappings":"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","sourcesContent":["/* global fetch */\r\n\r\nimport React, { useEffect, useState } from \"react\"\r\nimport {\r\n  Alert,\r\n  Button,\r\n  Picker,\r\n  StyleSheet,\r\n  TextInput,\r\n  Text,\r\n  TouchableOpacity,\r\n  View,\r\n} from \"react-native\"\r\nimport * as Permissions from \"expo-permissions\"\r\nimport * as Location from \"expo-location\"\r\n\r\nexport default function CalendarScreen({ navigation }) {\r\n  const [location, setLocation] = useState(null)\r\n  const [errorMsg, setErrorMsg] = useState(null)\r\n  const [stops, setStops] = useState(null)\r\n  const [selectedStop, setSelectedStop] = useState({})\r\n  const [currentStopLines, setCurrentStopLines] = useState(undefined)\r\n  const [selectedValue, setSelectedValue] = useState('')\r\n  const [listReady, setListReady] = useState(false)\r\n\r\n  useEffect(() => {\r\n    ; (async () => {\r\n      let { status } = await Location.requestPermissionsAsync()\r\n      if (status !== \"granted\") {\r\n        setErrorMsg(\"Permission to access location was denied\")\r\n      }\r\n\r\n      let location = await Location.getCurrentPositionAsync({})\r\n      setLocation(location)\r\n    })()\r\n  })\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://10.0.2.2:3000/vasttrafik/getNearbyStops\", {\r\n      body: JSON.stringify({ lat: \"57.7066\", lng: \"11.9672\" }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      method: \"POST\",\r\n    })\r\n      .then((result) => result.json())\r\n      .then((data) => {\r\n        console.log(data)\r\n        setStops(data)\r\n        setSelectedStop(data[0])\r\n        setListReady(true)\r\n        console.log(selectedStop.name)\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err)\r\n      })\r\n  }, [])\r\n\r\n  let text = \"Waiting..\"\r\n  if (errorMsg) {\r\n    text = errorMsg\r\n  } else if (location) {\r\n    text = JSON.stringify(location)\r\n  }\r\n\r\n\r\n  return (\r\n    <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\r\n      <View>\r\n        <Text>Avg√•ngstavla</Text>\r\n\r\n        {listReady && (\r\n          <Picker\r\n            selectedValue={selectedStop.id}\r\n            style={{ height: 50, width: 150 }}\r\n            onValueChange={(itemValue, itemIndex) => {\r\n              setSelectedValue(itemValue)\r\n            }}\r\n          >\r\n            {stops.map((stop, i) => {\r\n              <Picker.Item key={i} label={stop.name} value={stop.id} />\r\n            })}\r\n          </Picker>\r\n        )}\r\n\r\n\r\n      </View>\r\n      <Text>{text}</Text>\r\n    </View>\r\n  )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}